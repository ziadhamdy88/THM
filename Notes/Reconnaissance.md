# Passive Reconnaissance
- Gathering of information about the target without directly communicating with it.
- `whois <domain-name>`
- Nslookup:
	- `nslookup -type=A <domain-name>` DNS A records.
	- `nslookup -type=MX <domain-name> @<dns-server>` Mail exchange records at a certain DNS server.
	- `nslookup -type=TXT <domain-name>` DNS TXT records.
- `dig <domain-name> A` 
- `dig <domain-name> @<dns-server> TXT`
- DNSDumpster
- Shodan.io
# Active Reconnaissance
- Gathering information by have some sort of contact with the target, a phone call, visiting the target, checking the website, or checking if their firewall has an SSH port open.
- ## Web Browser
	- Developer tools.
	- FoxyProxy.
	- User-Agent Switcher and Manager gives you the ability to pretend to be accessing the webpage from a different operating system or different browser. You can pretend to be using a mobile browser when you're using a PC browser.
	- Wappalyzer provides insights about the technologies used on the visited websites.
- `ping -c <number-of-packets> <ip/hostname>`
- `traceroute <ip/hostname>`
	- Modify the TTL in the IP header to reveal only certain amounts of routers' IP.
- ## Telnet
	- Teletype Network protocol was developed to communicate with a remote server via CLI.
	- Default port is 23.
	- Telnet sends all data, including usernames and passwords in clear text.
	- Telnet client relies on the TCP protocol, Telnet can be used to connect to any service and grab its banner.
	- `telnet <ip> <port>`.
	- Can connect to any service that uses TCP and exchange a few messages unless it uses encryption.
	- Example:
		`telnet <ip> <port>`
		`GET / HTTP/1.1`
- ## Netcat
	- Can function as a client that connects to a listening port, and can act as a server that listens on ports.
	- Supports both TCP and UDP protocols.
	- Connect to a server using `nc <ip> <port>`, similar to `telnet <ip> <port>`.
	- On the server side `nc -lvnp <port>`
		- `-l` listen mode
		- `-v` verbose output
		- `-n` numeric only, no resolution of hostnames via DNS
		- `-p` specify the port
	- On the client side `nc <ip> <port>`.
- ## Nmap
	- ### Host Discovery
		- #### ARP
			- Only works when the target/s are on the same network, the MAC address is necessary for the link-layer header.
			- Discover hosts without port scanning using `nmap -sn <targets>`.
			- ARP scan using `nmap -PR -sn <targets>`.
			- **arp-scan**
				- A tool built around ARP queries, and provides many options to customize the scan.
				- `arp-scan --localnet` or `arp-scan -l` sends ARP queries to all valid IP addresses on the local network.
				- If the system has multiple interfaces, use `sudo arp-scan -I eth0 -l` to specify the interface.
		- #### ICMP
			- Many firewalls block ICMP echo by default.
			- `nmap -PE -sn <targets>` to use ICMP echo requests to discover live hosts.
			- Use ICMP Timestamp `nmap -PP -sn <targets>`, or ICMP Address Mask `nmap -PM -sn <targets>` instead if the echo requests are being blocked 
			- These two types can also be blocked, so switch between them to check.
		- #### TCP SYN Ping
			- Send a packet with the SYN (synchronize) flag set, open ports reply with SYN/ACK and closed ports reply with RST.
			- `nmap -PS21 -sn <targets>` to use TCP SYN ping on port 21, or a range of ports `-PS21-25`, don't have to specify a port and it defaults to TCP port 80 `-PS`.
			- Privileged users will not complete the 3 way handshake while unprivileged users will need to complete it.
		- #### TCP ACK Ping
			- Send a packet with the ACK flag set. Must be privileged user, if not nmap will attempt a 3-way handshake.
			- `nmap -PA -sn <targets>` similar to the TCP SYN ping in terms of port specifications.
			- Expected to get an RST reply back since the sent request isn't part of any ongoing communication.
			- Systems that don't reply at all are offline.
		- #### UDP Ping
			- Sending a packet to an open port is not expected to lead to any reply.
			- If a UDP packet is sent to a closed UDP port, we expect to get an "ICMP port unreachable" packet, this indicates that the target is up.
			- `nmap -PU -sn <targets>` to send UDP scan.
			- Nmap uses uncommon UDP ports to trigger an ICMP destination unreachable (port unreachable) error.
		- #### Masscan
			- Uses a similar approach to the UDP Ping scan, but it is quite aggressive with the rate of packets it generates.
			- `masscan <targets> -p443` to specify port 443.
			- `masscan <targets> -p20-25` to specify range of ports
			- `masscan <targets> --top-ports 100` to specify top 100 ports.
		- #### Reverse-DNS Lookup
			- Nmap by default uses reverse-DNS online hosts, because hostnames can reveal a lot.
			- If you don't want to send DNS queries use `-n` to skip the step.
			- Nmap will only look up online hosts, use option `-R` to query DNS server for offline hosts as well.
			- Use `--dns-servers <DNS-server>` to specify the DNS server to query.